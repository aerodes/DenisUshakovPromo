(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[576],{5723:(e,t,s)=>{Promise.resolve().then(s.bind(s,8502))},8502:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var r=s(5155),l=s(2115);function n(){let[e,t]=(0,l.useState)("192.168.10.0/24"),[s,n]=(0,l.useState)("Office,50\nWiFi,20\nCameras,10"),[a,i]=(0,l.useState)(null),[h,o]=(0,l.useState)([]);function d(e){return[e>>>24&255,e>>>16&255,e>>>8&255,255&e].join(".")}return(0,r.jsxs)("div",{style:{maxWidth:1100,margin:"0 auto",padding:24},children:[(0,r.jsx)("h1",{children:"Планирование подсетей IPv4"}),(0,r.jsxs)("section",{children:[(0,r.jsx)("label",{children:"Исходная сеть"}),(0,r.jsx)("input",{placeholder:"x.x.x.x/x",value:e,onChange:e=>t(e.target.value),style:{width:"100%"}})]}),(0,r.jsxs)("section",{style:{marginTop:16},children:[(0,r.jsx)("label",{children:"Подсети (имя, хосты)"}),(0,r.jsx)("textarea",{placeholder:"Имя подсети, кол-во хостов",rows:5,value:s,onChange:e=>n(e.target.value),style:{width:"100%",fontFamily:"monospace"}})]}),(0,r.jsx)("button",{style:{marginTop:16},onClick:()=>{try{i(null),o([]);let[r,l]=e.split("/"),n=Number(l);if(!function(e){let t=e.split(".");return 4===t.length&&t.every(e=>{let t=Number(e);return t>=0&&t<=255&&""!==e})}(r)||isNaN(n))throw Error("Некорректный исходный адрес");let a=r.split(".").reduce((e,t)=>(e<<8)+Number(t),0),h=a+2**(32-n)-1,c=s.split("\n").map(e=>{let[t,s]=e.split(",");return{name:(null==t?void 0:t.trim())||"Subnet",hosts:Number(s)}}).sort((e,t)=>t.hosts-e.hosts);if(c.some(e=>e.hosts<=0||isNaN(e.hosts)))throw Error("Ошибка в описании подсетей");let x=a,u=[];for(let e of c){var t;let s=(t=e.hosts,32-Math.ceil(Math.log2(t+2)));if(s<n)throw Error('Подсеть "'.concat(e.name,'" превышает размер исходной сети'));let r=2**(32-s),l=x,a=l+r-1;if(a>h)throw Error("Недостаточно адресов для разбиения");let i=l+1,o=i+1,c=a-1;u.push({name:e.name,network:d(l),cidr:s,mask:d(0===s?0:-1<<32-s>>>0),gateway:d(i),minHost:d(o),maxHost:d(c),dhcpRange:"".concat(d(o)," – ").concat(d(c)),broadcast:d(a),total:r,free:r-e.hosts-2}),x+=r}o(u)}catch(e){i(e.message)}},children:"Рассчитать"}),a&&(0,r.jsxs)("div",{style:{color:"red",marginTop:16},children:["Ошибка: ",a]}),h.length>0&&(0,r.jsxs)("table",{style:{marginTop:24,width:"100%",borderCollapse:"collapse"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Имя"}),(0,r.jsx)("th",{children:"Сеть"}),(0,r.jsx)("th",{children:"Маска"}),(0,r.jsx)("th",{children:"Gateway"}),(0,r.jsx)("th",{children:"DHCP"}),(0,r.jsx)("th",{children:"Broadcast"}),(0,r.jsx)("th",{children:"Свободно"})]})}),(0,r.jsx)("tbody",{children:h.map((e,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.name}),(0,r.jsxs)("td",{children:[e.network,"/",e.cidr]}),(0,r.jsx)("td",{children:e.mask}),(0,r.jsx)("td",{children:e.gateway}),(0,r.jsx)("td",{children:e.dhcpRange}),(0,r.jsx)("td",{children:e.broadcast}),(0,r.jsx)("td",{children:e.free})]},t))})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(5723)),_N_E=e.O()}]);