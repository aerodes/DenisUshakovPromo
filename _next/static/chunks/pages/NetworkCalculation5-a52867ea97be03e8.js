(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[534],{1301:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/NetworkCalculation5",function(){return r(8245)}])},8245:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(4848),l=r(6540);function n(){let[e,t]=(0,l.useState)("192.168.10.0/24"),[r,n]=(0,l.useState)("Office,50\nWiFi,20\nCameras,10"),[a,i]=(0,l.useState)(null),[h,o]=(0,l.useState)([]);function c(e){return[e>>>24&255,e>>>16&255,e>>>8&255,255&e].join(".")}return(0,s.jsxs)("div",{style:{maxWidth:1100,margin:"0 auto",padding:24},children:[(0,s.jsx)("h1",{children:"Планирование подсетей IPv4"}),(0,s.jsxs)("section",{children:[(0,s.jsx)("label",{children:"Исходная сеть"}),(0,s.jsx)("input",{placeholder:"x.x.x.x/x",value:e,onChange:e=>t(e.target.value),style:{width:"100%"}})]}),(0,s.jsxs)("section",{style:{marginTop:16},children:[(0,s.jsx)("label",{children:"Подсети (имя, хосты)"}),(0,s.jsx)("textarea",{placeholder:"Имя подсети, кол-во хостов",rows:5,value:r,onChange:e=>n(e.target.value),style:{width:"100%",fontFamily:"monospace"}})]}),(0,s.jsx)("button",{style:{marginTop:16},onClick:()=>{try{i(null),o([]);let[s,l]=e.split("/"),n=Number(l);if(!function(e){let t=e.split(".");return 4===t.length&&t.every(e=>{let t=Number(e);return t>=0&&t<=255&&""!==e})}(s)||isNaN(n))throw Error("Некорректный исходный адрес");let a=s.split(".").reduce((e,t)=>(e<<8)+Number(t),0),h=a+2**(32-n)-1,d=r.split("\n").map(e=>{let[t,r]=e.split(",");return{name:(null==t?void 0:t.trim())||"Subnet",hosts:Number(r)}}).sort((e,t)=>t.hosts-e.hosts);if(d.some(e=>e.hosts<=0||isNaN(e.hosts)))throw Error("Ошибка в описании подсетей");let u=a,x=[];for(let e of d){var t;let r=(t=e.hosts,32-Math.ceil(Math.log2(t+2)));if(r<n)throw Error('Подсеть "'.concat(e.name,'" превышает размер исходной сети'));let s=2**(32-r),l=u,a=l+s-1;if(a>h)throw Error("Недостаточно адресов для разбиения");let i=l+1,o=i+1,d=a-1;x.push({name:e.name,network:c(l),cidr:r,mask:c(0===r?0:-1<<32-r>>>0),gateway:c(i),minHost:c(o),maxHost:c(d),dhcpRange:"".concat(c(o)," – ").concat(c(d)),broadcast:c(a),total:s,free:s-e.hosts-2}),u+=s}o(x)}catch(e){i(e.message)}},children:"Рассчитать"}),a&&(0,s.jsxs)("div",{style:{color:"red",marginTop:16},children:["Ошибка: ",a]}),h.length>0&&(0,s.jsxs)("table",{style:{marginTop:24,width:"100%",borderCollapse:"collapse"},children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Имя"}),(0,s.jsx)("th",{children:"Сеть"}),(0,s.jsx)("th",{children:"Маска"}),(0,s.jsx)("th",{children:"Gateway"}),(0,s.jsx)("th",{children:"DHCP"}),(0,s.jsx)("th",{children:"Broadcast"}),(0,s.jsx)("th",{children:"Свободно"})]})}),(0,s.jsx)("tbody",{children:h.map((e,t)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.name}),(0,s.jsxs)("td",{children:[e.network,"/",e.cidr]}),(0,s.jsx)("td",{children:e.mask}),(0,s.jsx)("td",{children:e.gateway}),(0,s.jsx)("td",{children:e.dhcpRange}),(0,s.jsx)("td",{children:e.broadcast}),(0,s.jsx)("td",{children:e.free})]},t))})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(1301)),_N_E=e.O()}]);